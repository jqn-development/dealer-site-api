language: node_js
services:
- redis-server
node_js:
- node
before_script:
- npm install -g gulp-cli gulp
script: gulp
env:
  global:
  - secure: cRxxf58a+RIORFglAJXK4BM6ZbaR5o5oamg1s5j/8HoeW2QZ3BVjUEh++AKuEF6VszWaKx2cTOkgm94jFCs/Cv3WDlXNe31VW02M0wpMyFPvx3a4G4ra3DM4L4k1EUXQiZzLJI2M/nN0HIUW73OObSLNQHWIYleiWnK5v4IMe0ZR5/pHD4y6SMowbukyVrUGEeFz4duKl/NRV0n4+71TphvBoR43tAWB6Hm+5Eyrw9gaymlUrZT7njG69nt07hg8EH23rfViX6sxxju0AwfGO6bXZrCBDETjDWy0zxADyyDqO1KVino2XCmRhRFQvjdbVuE59kBkSTCpPFVrealTd7oTHf28CBy5UryLdv3eww/XhNS2WVIEev2WD1WQ1vlMkbjbbFuvoNr8K90ADtnkpo3Fxkjjcr1QRW6ii4dEHQrMIyCQ6zgq9eE7jIspKjdGaXks0ikSRX4iQCNsxPfzAtsWt7dzJ0KCMAW9YKQV9yJkzdAt2E8J4Ikdq8T1Yjmwb4tVVwFEGQW2tvlCotSt7jelNydah1S9CPa8zsFY+nww0JgIvrN0G7T5vaVSPlZLjo7uaiLfPxWVAScUJmiZi0RedCUNOFU2NWQn7KPFiT453OBdFmOXgDqdva97N3vOYxW1oO4D9e8+kRxWZMq5FzW8FWUEXW9T0qw59LEOcFY=
  - secure: b7wlF2d2ixqlIAMzNUFujTQcLRc8Fdwc7CVaWxK5FahWRoeVJ+q+NGpZ8J74AwwN0jfFbiSP3zkgTXdQMEBE7Ru6oeo/tAZFtd/MDGwvT1JCWq8xS77KxiShbR/cY7ZPJ6YtMOnimmA5KsXaL3d6bxAxN5yRMex4TE89uL7AlPsENpiareqW+AzEgPPkDvB8MLw04R9qhMzJaQpTp2mf2b39hlSu0UNPYj/LsDVpIdpx6oQi3SGJ+b7yvwK6bQ2Ne0NvVoTIMaNzjx6NqlvynbObQa9Xt/iTT2thDoWs90SJeZQ/3qWx+HAu66xh0zxG0lalKOQQF3NTk8q3nAOKBRHF+wqdZdhpHE4qkIdLwyRHl4TkOPtANnpHCOl6NHtrfOBVrtbQNsraqeH+HlB6vQEHQY3hr+ibB89NAX08TZrIRHoM27+dIPZackg2slb9Pon8DxMtkOi1sKgNurbhDCrff+/5XMvJZVL9wuMkWPwaS1ZID9ZsyZsVlgB61eLdkbvExiTFNCC7y2EK6G/WHSqq29M/vx0pXGzlkU6+IT5fT5zYVTrAmBx5zYVAZUGgzDhSSZ988/tHhe6U8sROfmvsImHrqNSNfZnqJMLeeIRGuJ+HKZb3d84CmVD6+DRwKdShV5uxKmGEQj0jAGzDLeKZQvA2lsxtirrbaCjQwVY=
  - secure: Wb3ozX+GXhFUfpklY7tp/s5S72hRk3rET1pG+FKYd28S6vIH204KgUWxslXBlaGByAxZpbN0kQJflKYTEkMm7Vh0Nocf/4HJEJDLJm/TnMi9NMr3SYtRgUbbTikGIhua176CvXjBu7NgiiFXHmdFETBw5KRa79zElhyndpLHYodRKKwActQWd8lh7g0dksifB8oQbE53Y05ZZNn7oBjKTsmOJyRtDEf0Wo7N0Pg1lKOq5ekEa9i00bfZX2RJGB6hyziD0ZZutScRrCY3AqWmEf5YW2cvcPomrOSd05DzXlGnzGuavQqF6jFLJgSyjRavJUoy4vJbSXpzq50NaDt18iCpjH4qnb9lxBOHH2azljLmbJCC3fGnkTHvjnmahCQ1N5yxZCHmNqDuP5fia7ojLBkTsMAyrRtddHOuyVR/BPCwzNm+JIla/Bguc08LVbvhuF3Nu7Rth/A1Jha4q9cOP2fevtJDbtQT/Q0hETLT4S3UbjcfCGaMgjfMeFQUi13mbccKy8diXseKUt7CfR3Io3UiY2SPaL9GeLJRZkw0WuP5owwBJ2oN9tvTueRm5k1apW6rR78pM0M2FltQ2vrCneCFxCOi3b8jqhk6ICu5VWLLlI/eUlAc3KbHLgRK8/ghUiB6YV78SJ5Td8X45thO7jhz/D8oeZ8tFyjnMJXVtww=
  - secure: gpcuOBxmd8sHLSMBUjWqjx4/ZYk5MBQfZ/R+JZX2hgCrjTcmdZKjIUOfvrnyeQYPSnY1FGL5j07sS3DFhgETnG5yEDrHHs2akx3XuNNDz3cuPa21305aKn4mfV453VO4dOwlfqxp9NcY8U18fP+Wbea4o86DR34vjher8ACDG75vQroo9R6F8qZLNb6pQxJh4svfsvbjpOTW1LqbqFFmnKt1/lz/cMKZf46xWu8KUyLHy8AbS2xMeaOPU+rb5RFOfNHrmnBtAXVDVHba7IqmyZkpkCCrkNHjLBLxDnyX3cIgpZoM8LW2zo+Cfh3eTe9PI9Dy1AGgK7ByrVFKiswgdpQGp2m2yw7OcGuN0qIrheaqHq/xB7jNoE2+fzcQxcFNs2FAbLJunLs2Cqqvmkw3Sz4+MAf2Cp+A6Bfoer/hMjnpnC/ZTv7zoTP3T/dihBXz62pPQIWzB7TVa0mCFjvc81N/N1vOEJV6NrNpav2Gg08AMY6BHeWzIZbjXCCeXHCAECCbS7GUquTJtKK+wMh4J519tvLwiBImLG4ZBqQkZLzWgF+hI6XqIUQ9nKOzYKuvcszLTl+pDB3XXXv9JD/UiWgsay/yJl3zImJB1dDWruKMflGrTuwzOzOUFxYzJotKg8sgg1DdotfTs9e1wQJFZLOjW6+G1bjQdJ4rWKKvjvI=
  - secure: aCsGz88Xp5bQVuL7U40LOmliUU43zOMTvKucz1UjvacfTSbnZUuGA1DSV8xySbts7teB8TY9qCUgGKeR0R8fLbtv+o5jo2TA2/aDFO3dM45v8aAYYqn4iWHHfO1lAgitokPePfIymioQHkUUaYX7MR+DH927jrhmVGZy4BIxoQFpvkAFXPZFu9A/zVSvCPnqw/CvkOCRlD8+OSw7cpP5ZloiLEeyQq6SoPIBxs9tggye/1nKHD3CuE1IGrHCrXiCSC/HhcmYVCQ9Nlmqn1MbRn9UpdtZYFwWjDd7PEvXjds7+ioNMXeiHqGaCvKFKlL+WgsO0/AXeC+bJrx9adbCk9Dba/8tU4ComACg6Q3VAiNL9oaXs1OkVGwu/OGx1oguaFDHOf8/2SHDFUoaFDpGAVfcPQpEjaM47TnqpsPdvMfLEbwikrtnvcfSCjeNpqc4Ud3ADg9pmlzE3p8zQ/pX3Xv0ft9SQ4j/0eEcs5iK3PBK1WDaaCu1PLFXpkhoTExgPN121P5jp7cVo2oNi5OuwywmY3x5qmPMR7x4xUNIN4rHHN3wJo8Yq6UWVP/+22LrKPps3jmZ4hwGfimnnKpIxnKbciSJI9fZ7XbmjyuT+Pc/Qsh8s8PhTNwwuoh+WnOoUqYbOBEdVxmZcLB+ww98p3allP833nco+6gZvt7keJg=
deploy:
  - provider: s3
    bucket: codedeploy-website-api
    local_dir: upload
    upload-dir: prod
    on:
      branch: master
  - provider: s3
    bucket: codedeploy-website-api
    local_dir: upload
    upload-dir: dev
    on:
      branch: dev
after_script:
  - zip -r latest *
  - mkdir -p upload
  - mv latest.zip upload/latest.zip
